{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nfunction generateMarkup(data) {\n  const markup = data.hits\n    .map(\n      item => `\n        <li class=\"gallery-item\" data-id=\"${item.id}\">\n          <div class=\"img-container\">\n            <a class=\"large-image\" href=\"${item.largeImageURL}\">\n              <img class=\"image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\">\n            </a> \n          </div>\n          <ul class=\"description-list\">\n            <li class=\"description-item\"><p>Likes</p><p>${item.likes}</p></li>\n            <li class=\"description-item\"><p>Views</p><p>${item.views}</p></li>\n            <li class=\"description-item\"><p>Comments</p><p>${item.comments}</p></li>\n            <li class=\"description-item\"><p>Downloads</p><p>${item.downloads}</p></li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport default generateMarkup;\n","import generateMarkup from './render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\n\nlet page = 1;\nlet searchWord;\n\nconst requestForImgs = async event => {\n  let keyWord;\n\n  if (event.target === document.querySelector('.more-btn')) {\n    keyWord = searchWord;\n    page += 1;\n  } else {\n    searchWord = event.target.elements.search.value.trim();\n    keyWord = searchWord;\n    page = 1;\n  }\n\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('is-hidden');\n\n   try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '42738437-82a7e92e7d385bcc591e5269e',\n        q: keyWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page,\n      },\n    });\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: 'red',\n        messageColor: 'white',\n        position: 'topRight',\n      });\n    } else {\n      generateMarkup(response.data);\n      document.querySelector('.more-btn').classList.remove('is-hidden');\n\n      if (event.target === document.querySelector('.more-btn')) {\n        const imgPerOneTime = 15;\n        const imgAmount = response.data.totalHits;\n        const totalPages = Math.ceil(imgAmount / imgPerOneTime);\n\n        if (totalPages <= page) {\n          document.querySelector('.more-btn').classList.add('is-hidden');\n          iziToast.show({\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n            backgroundColor: 'red',\n            messageColor: 'white',\n            position: 'topRight',\n          });\n        }\n\n        const item = document.querySelector('.gallery-item');\n        const itemHeight = item.getBoundingClientRect().height;\n\n        window.scrollBy({\n          top: itemHeight * 2,\n          left: 0,\n          behavior: 'smooth',\n        });\n      }\n    }\n\n    loader.classList.add('is-hidden');\n    const lightbox = new SimpleLightbox('.large-image', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.show({\n      message: 'Sorry, something went wrong!',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      position: 'topRight',\n    });\n  }\n};\n\nexport default requestForImgs;\n","import requestForImgs from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector('.form');\nconst moreBtn = document.querySelector('.more-btn');\nconst gallery = document.querySelector('.gallery');\n\nform.addEventListener('submit', doSearch);\n\nfunction doSearch(event) {\n  event.preventDefault();\n  const searchValue = event.target.elements.search.value.trim();\n\n  if (searchValue === '') {\n    iziToast.show({\n      message: 'You have to enter something',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      position: 'topRight',\n    });\n  } else {\n    gallery.innerHTML = '';\n    requestForImgs(event);\n  }\n  form.reset();\n}\n\nmoreBtn.addEventListener('click', showMoreImgs);\n\nfunction showMoreImgs(event) {\n  requestForImgs(event);\n}\n"],"names":["gallery","generateMarkup","data","markup","item","page","searchWord","requestForImgs","event","keyWord","loader","response","axios","iziToast","imgAmount","itemHeight","SimpleLightbox","form","moreBtn","doSearch","showMoreImgs"],"mappings":"owBAAA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAeC,EAAM,CAC5B,MAAMC,EAASD,EAAK,KACjB,IACCE,GAAQ;AAAA,4CAC8BA,EAAK,EAAE;AAAA;AAAA,2CAERA,EAAK,aAAa;AAAA,wCACrBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,0DAIlBA,EAAK,KAAK;AAAA,0DACVA,EAAK,KAAK;AAAA,6DACPA,EAAK,QAAQ;AAAA,8DACZA,EAAK,SAAS;AAAA;AAAA,cAGvE,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CClBA,IAAIE,EAAO,EACPC,EAEJ,MAAMC,EAAiB,MAAMC,GAAS,CACpC,IAAIC,EAEAD,EAAM,SAAW,SAAS,cAAc,WAAW,GACrDC,EAAUH,EACVD,GAAQ,IAERC,EAAaE,EAAM,OAAO,SAAS,OAAO,MAAM,OAChDC,EAAUH,EACVD,EAAO,GAGT,MAAMK,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,WAAW,EAElC,GAAI,CACH,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAJ,CACD,CACP,CAAK,EAED,GAAIM,EAAS,KAAK,KAAK,SAAW,EAChCE,EAAS,KAAK,CACZ,QACE,2EACF,gBAAiB,MACjB,aAAc,QACd,SAAU,UAClB,CAAO,UAEDZ,EAAeU,EAAS,IAAI,EAC5B,SAAS,cAAc,WAAW,EAAE,UAAU,OAAO,WAAW,EAE5DH,EAAM,SAAW,SAAS,cAAc,WAAW,EAAG,CAExD,MAAMM,EAAYH,EAAS,KAAK,UACb,KAAK,KAAKG,EAAY,EAAa,GAEpCT,IAChB,SAAS,cAAc,WAAW,EAAE,UAAU,IAAI,WAAW,EAC7DQ,EAAS,KAAK,CACZ,QACE,6DACF,gBAAiB,MACjB,aAAc,QACd,SAAU,UACtB,CAAW,GAIH,MAAME,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,KAAM,EACN,SAAU,QACpB,CAAS,CACF,CAGHL,EAAO,UAAU,IAAI,WAAW,EACf,IAAIM,EAAe,eAAgB,CAClD,aAAc,IACd,aAAc,KACpB,CAAK,EAEQ,QAAO,CACjB,MAAe,CACdH,EAAS,KAAK,CACZ,QAAS,+BACT,gBAAiB,MACjB,aAAc,QACd,SAAU,UAChB,CAAK,CACF,CACH,ECvFMI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,WAAW,EAC5ClB,EAAU,SAAS,cAAc,UAAU,EAEjDiB,EAAK,iBAAiB,SAAUE,CAAQ,EAExC,SAASA,EAASX,EAAO,CACvBA,EAAM,eAAc,EACAA,EAAM,OAAO,SAAS,OAAO,MAAM,SAEnC,GAClBK,EAAS,KAAK,CACZ,QAAS,8BACT,gBAAiB,MACjB,aAAc,QACd,SAAU,UAChB,CAAK,GAEDb,EAAQ,UAAY,GACpBO,EAAeC,CAAK,GAEtBS,EAAK,MAAK,CACZ,CAEAC,EAAQ,iBAAiB,QAASE,CAAY,EAE9C,SAASA,EAAaZ,EAAO,CAC3BD,EAAeC,CAAK,CACtB"}